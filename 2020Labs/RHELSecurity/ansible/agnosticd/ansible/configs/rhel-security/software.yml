---
- name: Step 004 Environment specific Software
  hosts: localhost
  gather_facts: False
  become: false
  tasks:
    - debug:
        msg: "Software tasks Started"

- name: Configure AIDE on RHEL 8 node1
  hosts: node1.*
  become: yes
  tasks:
    - import_tasks: fix-authorized_keys.yml

    - name: Setup AIDE
      import_tasks: aide.yml

- name: Configure gpg on RHEL 8 node 2
  hosts: node2.*
  become: yes
  tasks:
    - import_tasks: fix-authorized_keys.yml

    - name: Setup GPG
      import_tasks: gpg.yml

- name: Configure audit on RHEL 8 node 3
  hosts: node3.*
  become: yes
  tasks:
    - import_tasks: fix-authorized_keys.yml

    - name: Setup AUDIT
      import_tasks: audit.yml

- name: Configure firewalld on RHEL 8 node 4
  hosts: node4.*
  become: yes
  tasks:
    - import_tasks: fix-authorized_keys.yml

    - name: Setup firewalld
      import_tasks: firewalld.yml

- name: Software flight-check
  hosts: localhost
  connection: local
  gather_facts: false
  become: false
  tags:
    - post_flight_check
  tasks:
    - debug:
        msg: "Software checks completed successfully"
